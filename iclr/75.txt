Published as a conference paper at ICLR 2018

MULTI-TASK LEARNING FOR DOCUMENT RANKING
AND QUERY SUGGESTION

Wasi Uddin Ahmad & Kai-Wei Chang
Department of Computer Science
University of California, Los Angeles
{wasiahmad,kwchang}@cs.ucla.edu

Hongning Wang
Department of Computer Science
University of Virginia
hw5x@virginia.edu

ABSTRACT

We propose a multi-task learning framework to jointly learn document ranking and
query suggestion for web search. It consists of two major components, a document
ranker and a query recommender. Document ranker combines current query and
session information and compares the combined representation with document
representation to rank the documents. Query recommender tracks users’ query re-
formulation sequence considering all previous in-session queries using a sequence
to sequence approach. As both tasks are driven by the users’ underlying search
intent, we perform joint learning of these two components through session recur-
rence, which encodes search context and intent. Extensive comparisons against
state-of-the-art document ranking and query suggestion algorithms are performed
on the public AOL search log, and the promising results endorse the effectiveness
of the joint learning framework.

1

INTRODUCTION

Understanding users’ information need is the key to optimize a search engine for providing rele-
vant search results. Search engine logs have been extensively used to mine users’ search intent,
reﬂected in their search result click preferences and query reformulations (Baeza-Yates et al., 2004;
Croft et al., 2010). Typically, user query logs are partitioned into search sessions, i.e., sequences of
queries and clicks issued by the same user and within a short time interval. Search sessions provide
useful contextual information about user intent and help to narrow down ambiguity while ranking
documents for the current query and predicting next query that users will submit, a.k.a. context-
awareness (Jiang et al., 2014). Since both a user’s click behavior and query reformulation are driven
by the underlying search intent, we argue that jointly modeling both tasks can beneﬁt each other.
In this work, we propose a joint learning framework, called multi-task neural session relevance
framework (M-NSRF), to predict users’ result clicks and future queries in search sessions. We
model search context within a session via a recurrent latent state in a deep neural network (Collobert
& Weston, 2008; Liu et al., 2015), which governs the generation of result clicks in the current query
and formation of next query. By sharing the latent states across the tasks of document ranking and
query suggestion, we learn the representations of queries, documents and user intent carrying over
the whole session jointly, i.e., multi-task learning. This multi-task learning framework is ﬂexible
and can be incorporated with existing approaches for representing query and documents.
The general workﬂow of M-NSRF is illustrated in Figure 1. Given a sequence of queries from the
same search session, e.g., “cheap furniture” and “craig list virginia”, M-NSRF is trained to predict
both the result clicks under the current query and the next query “cheap furniture for sale.” It is
evident that in this search session the user kept reformulating the queries because his/her information
need has not been met by the result clicks in the previously submitted queries, reﬂected in the added
and removed query terms. And such revisions suggest what he/she might want to click next. As a
result, the modeling of result clicks and query reformulations mutually reinforce each other to reveal
users’ underlying search intent. In M-NSRF, we model user search intent as a session-level recurrent
state, the learning of which is aided by both document ranking and query prediction tasks.
We evaluate the effectiveness of the proposed framework using the publicly available AOL search
log and compare with several well-known classical retrieval models, as well as various neural re-
trieval models speciﬁcally designed for ad-hoc retrieval. We also compare M-NSRF with several

1

